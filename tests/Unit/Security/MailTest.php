<?phpuse App\Security\Event\PreUserCreatedEvent;use App\Security\Event\UserEvent;use App\Security\EventListener\UserNotificationListener;use App\Tests\Services\MockUserFactory;use Symfony\Component\Mailer\MailerInterface;use Symfony\Component\Mime\Email;class TestDTO{    public function __construct(        public MockUserFactory $userFactory,    ) {    }}describe('test user mails', function () {    test('should send an email about created account to user', function () {        $test = new TestDTO(new MockUserFactory());        $user = $test->userFactory->createAdmin();        $mailer = Mockery::mock(MailerInterface::class);        $mailer            ->expects('send')            ->withArgs(function (Email $email) use ($user) {                $mails = array_map(fn($to) => $to->getAddress(), $email->getTo());                return in_array($user->getEmail(), $mails);            });        (new UserNotificationListener($mailer))->onPreUserCreated(new PreUserCreatedEvent($user));    });});