{% macro delete_user_script(tableId) %}
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const table = document.querySelector('#{{ tableId }}');
            table.addEventListener('click', async (event) => {
                /** @type {HTMLElement} */
                const target = event.target;
                // Check if clicked element is a delete button
                if (!target.matches('.toggle-user-btn')) {
                    return;
                }

                const userId = target.getAttribute('data-user-id');
                const name = target.getAttribute('data-user-name');


                const el = document.createElement('div');
                const type = target.getAttribute('data-type');
                el.classList.add('text-start');
                if (target.classList.contains('disable-user-btn')) {
                    if (type === 'admin') {
                        el.innerHTML = `{{ 'admin.accounts.manage.admin.disable_text'|trans|raw }}`.replace('{name}', name);
                    } else {
                        el.innerHTML = `{{ 'admin.accounts.manage.client.disable_text'|trans|raw }}`.replace('{name}', name);
                    }

                    const response = await Swal.fire({
                        title: '{{ 'common.confirm_your_action'|trans }}',
                        html: el,
                        icon: 'warning',
                        confirmButtonText: '{{ 'common.confirm'|trans }}'
                    });

                    if (response.isConfirmed) {
                        window.location.href = '{{ path('app_admin_disable_account', {'id': 'userId'}) }}'.replace('userId', userId);
                    }
                } else {
                    if (type === 'admin') {
                        el.innerHTML = `{{ 'admin.accounts.manage.admin.restore_text'|trans|raw }}`.replace('{name}', name);
                    } else {
                        el.innerHTML = `{{ 'admin.accounts.manage.client.restore_text'|trans|raw }}`.replace('{name}', name);
                    }

                    const response = await Swal.fire({
                        title: '{{ 'common.confirm_your_action'|trans }}',
                        html: el,
                        icon: 'warning',
                        confirmButtonText: '{{ 'common.confirm'|trans }}'
                    });

                    if (response.isConfirmed) {
                        window.location.href = '{{ path('app_admin_restore_account', {'id': 'userId'}) }}'.replace('userId', userId);
                    }
                }
            });
        })
        ;
    </script>
{% endmacro %}
